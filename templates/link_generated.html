{% extends "base.html" %}

{% block title %}Share with Partner{% endblock %}

{% block content %}
<div class="link-page">
    <div class="progress-bar">
        <div class="progress" style="width: 80%"></div>
    </div>
    
    <div class="success-message">
        <div class="checkmark">âœ“</div>
        <h2>Your Responses Have Been Saved!</h2>
        <p>Now it's your partner's turn</p>
    </div>
    
    <div class="link-container">
        <h3>Share this link with your partner:</h3>
        <div class="link-box">
            <input type="text" id="partner-link" value="{{ link }}" readonly>
            <button onclick="copyLink()" class="btn-copy" id="copy-btn">
                ğŸ“‹ Copy Link
            </button>
        </div>
        <p class="link-info">This link is unique and can only be used once. Your partner will answer the same questions.</p>
    </div>
    
    <div class="share-options">
        <h4>Or share via:</h4>
        <div class="share-buttons">
            <a href="https://wa.me/?text=Please%20complete%20this%20relationship%20questionnaire:%20{{ link }}" 
               target="_blank" class="share-btn whatsapp">
                WhatsApp
            </a>
            <a href="mailto:?subject=Relationship%20Questionnaire&body=Please%20complete%20this%20questionnaire:%20{{ link }}" 
               class="share-btn email">
                Email
            </a>
            <a href="sms:?body=Please%20complete%20this%20questionnaire:%20{{ link }}" 
               class="share-btn sms">
                SMS
            </a>
        </div>
    </div>
    
    <div class="next-steps">
        <h4>What happens next?</h4>
        <ol>
            <li>Your partner opens the link and completes the questionnaire</li>
            <li>Once they submit, results will be automatically generated</li>
            <li>Both of you will see the compatibility analysis and recommendations</li>
        </ol>
    </div>
    <!-- Add this AFTER the partner link section -->
    <div class="results-section" style="margin-top: 30px; padding-top: 30px; border-top: 2px solid #e0e0e0;">
        <h3 style="color: #333; margin-bottom: 15px;">ğŸ“Š View Your Results</h3>
        <p style="color: #666; margin-bottom: 20px;">
            After your partner completes the questionnaire, you can view your compatibility results here:
        </p>
        <a href="{{ url_for('show_results', link_token=link.split('/')[-1]) }}" 
           class="btn btn-primary" 
           style="display: inline-block; padding: 12px 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: 600;">
            ğŸ” Check Results
        </a>
        <p style="color: #999; font-size: 14px; margin-top: 15px;">
            â„¹ï¸ Note: Results will only be available after both partners complete the questionnaire.
        </p>
    </div>
    
    <div class="warning-box">
        âš ï¸ <strong>Important:</strong> Keep this link safe. Anyone with this link can see your combined results.
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    function copyLink() {
        const linkInput = document.getElementById('partner-link');
        const copyBtn = document.getElementById('copy-btn');
        
        linkInput.select();
        document.execCommand('copy');
        
        // Visual feedback
        copyBtn.textContent = 'âœ“ Copied!';
        copyBtn.style.backgroundColor = '#10b981';
        
        setTimeout(() => {
            copyBtn.textContent = 'ğŸ“‹ Copy Link';
            copyBtn.style.backgroundColor = '';
        }, 2000);
    }
</script>
{% endblock %}
